"0","# Load necessary libraries"
"0","library(tidyr)  # for spread function"
"0","library(ggplot2)  # for plotting"
"0","library(dplyr)  # for data manipulation"
"0",""
"0","# Spread data to have years as columns"
"0","data_diff <- spread(data_filtered, Year, Loss.in.Billion)"
"0",""
"0","# Calculate the absolute percentage difference and rename it"
"0","data_diff$Loss_Percentage <- (abs(data_diff$`2020` - data_diff$`2019`) / data_diff$`2019`) * 100"
"0",""
"0","# Create a bar plot showing the absolute percentage difference in loss between 2019 and 2020"
"0","plot2 = ggplot(data_diff, aes(x = reorder(Country, Loss_Percentage), y = Loss_Percentage, fill = Loss_Percentage)) +"
"0","  geom_bar(stat = ""identity"") +"
"0","  scale_fill_gradient(low = ""lightblue"", high = ""darkblue"") +  # Light to dark gradient"
"0","  labs(title = ""Comparative Analysis of Loss by Country in Percentage"","
"0","       x = ""Country"", y = ""Loss (%)"") +  # Updated y-axis label"
"0","  theme(axis.text.x = element_text(angle = 45, hjust = 1),"
"0","        plot.title = element_text(hjust = 0.5)) +  # Center the title"
"0","  geom_text(aes(label = round(Loss_Percentage, 1)), vjust = -0.5, color = ""black"")  # Add values on top of the bars"
"0","print(plot2)"
